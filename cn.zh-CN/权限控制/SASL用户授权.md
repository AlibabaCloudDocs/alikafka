---
keyword: [kafka, acl, sasl]
---

# SASL用户授权

借助的ACL，您可以按需为SASL用户赋予向收发消息的权限，从而实现权限分割。

您的实例必须满足以下条件：

-   实例规格类型为专业版。
-   实例运行状态为**服务中**。
-   大版本为2.2.0版本及以上。如何升级实例大版本，请参见[t998840.md\#section\_51f\_vbx\_nxm](/cn.zh-CN/用户指南/实例/升级实例版本.md)。
-   小版本为最新版。如何升级实例小版本，请参见[t998840.md\#section\_3te\_xlw\_iip](/cn.zh-CN/用户指南/实例/升级实例版本.md)。

**说明：** 公网/VPC实例的默认SASL用户是没有任何权限的。开启ACL后，公网/VPC实例的默认SASL用户会因为没有任何权限而收发消息失败。您需要为该SASL用户授予所有Topic和Consumer Group的读写权限。

企业A购买了，企业A希望用户A只能从的所有Topic中消费消息，而不能向的任何Topic生产消息。

## 步骤一：开启ACL

升级实例的小版本后，在控制台为实例开启ACL。

1.  在**实例详情**页面，单击**概览**区域右上角的**开启 ACL**。

2.  在**提示**对话框，单击**确认**，然后手动刷新页面。

    手动刷新页面后，**实例详情**页面的**基础信息**区域，运行**状态**显示**升级中**。待实例的**状态**显示**服务中**说明开启ACL任务完成。

    **说明：** 升级完成后，实例才会开启ACL。您才可以创建SASL用户并为其授权后，通过SASL接入点接入。升级预计需要15分钟~20分钟。


## 步骤二：创建SASL用户

实例开启ACL后，为用户A创建SASL用户。

1.  在**实例列表**页面，选择已经开启ACL的实例。

2.  在**实例详情**页面，单击**SASL 用户管理**页签。

3.  在**SASL 用户管理**页签中，单击**创建 SASL 用户**。

4.  在**创建 SASL 用户**面板，设置SASL用户，然后单击**创建**。

    ![pg_create_sasl_user ](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/7194872261/p99571.png)

    |参数|描述|
    |--|--|
    |**用户名**|SASL用户的名称。|
    |**用户类型**|支持的SASL机制如下：     -   **PLAIN**： 一种简单的用户名密码校验机制。优化了PLAIN机制，支持不重启实例的情况下动态增加SASL用户。
    -   **SCRAM**：一种用户名密码校验机制，安全性比PLAIN更高。使用SCRAM-SHA-256。 |
    |**密码**|SASL用户的密码。|
    |**确认密码**|确认SASL用户的密码。|

    创建完成后，**SASL 用户管理**页签下方显示您创建的SASL用户。

    -   如果您需要更改SASL用户的密码，单击其**操作**列的**修改密码**。在**修改SASL用户密码**面板，设置**新密码**并**确认新密码**。单击**确定**。
    -   如果您需要删除SASL用户，单击其**操作**列的**删除**。

## 步骤三：授予SASL用户权限

为用户A创建SASL用户后，为该SASL用户授予从Topic和Consumer Group读取消息的权限。

1.  在**实例详情**页面，单击**SASL 权限管理**页签。

2.  在**SASL 权限管理**页签，单击**添加权限**。

3.  在**添加权限**面板，配置如下参数，然后单击**确定**。

    ![pg_read_from_Topic](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3655872261/p99574.png)

    |参数|描述|
    |--|--|
    |**用户名**|SASL用户的名称。支持通配符星号（\*）表示所有用户名。|
    |**资源类型**|支持授权的资源类型如下：     -   Topic：消息主题。
    -   Group：消费组。 |
    |**匹配方式**|支持的匹配模式如下：     -   **完全匹配**：按字面值匹配资源名称。全匹配模式只会匹配名称完全相同的资源。
    -   **前缀匹配**：按前缀匹配资源名称。前缀匹配模式会匹配以匹配名称开头的任意资源名称。 |
    |**资源名**|Topic或Consumer Group的名称。支持通配符星号（\*）表示所有资源名。|
    |**操作类型**|支持的操作类型如下：    -   **写入**
    -   **读取**
**说明：** 资源类型Group仅支持操作类型**读取**。 |

    配置完成之后，在**SASL 权限管理**页签，可设置**资源类型**、**匹配方式**、**资源名**与**用户名**，单击**查询**，查看已创建的用户权限。


## 相关操作

完成授权后，用户A可以通过SASL接入点接入并使用PLAIN机制消费消息。如何使用SDK接入，请参见[t998844.md\#](/cn.zh-CN/SDK参考/SDK概述.md)。

