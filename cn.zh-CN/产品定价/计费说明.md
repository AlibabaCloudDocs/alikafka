# 计费说明 {#concept_1375190 .concept}

本文介绍消息队列 for Apache Kafka 的实例类型和计费模式，以便您了解计价，更好地按需选型。

## 计费模式 {#section_ch3_r9z_71u .section}

消息队列 for Apache Kafka 实例有以下两种计费模式：

-   [包年包月](#section_zt1_rad_6pr)（预付费）

    在包年包月计费模式下，您需预付费，再使用。涉及的计费项目有：

    -   公网流量（该计费项目只适用于公网实例）
    -   流量峰值
    -   磁盘容量
    -   Topic 规格
-   [按量后付费](#section_oik_ks8_s2u)（后付费）

    在按量后付费模式下，您使用后，再付费。涉及的计费项目有：

    -   公网流量（该计费项目只适用于公网实例）
    -   流量峰值
    -   磁盘容量
    -   Topic 规格
    **说明：** 

    -   若需切换计费模式，您可登录[消息队列 for Apache Kafka 控制台](http://kafka.console.aliyun.com/?spm=a2c4g.11186623.2.16.10522eb1SUcSI6)，在实例详情页面的**运行状态**区域，单击**转包年包月**完成切换。

    -   目前，仅支持从按量后付费模式切换到包年包月预付费模式，且切换前后的配置不能变更。


**说明：** 接口调用次数不作为计费项。

## 计费项目 {#section_d1m_5qq_3kn .section}

计费项目的详细说明如下表所示。

|计费项目|说明|备注|
|----|--|--|
|公网流量|公网流量分为双通道，读写一致。购买时请按最大的为准。|该计费项目仅适用于公网实例。|
|流量峰值|流量峰值的购买说明如下： -   请按照读流量峰值和写流量峰值之和购买流量峰值规格。为了业务的稳定性，一般购买大于实际读写流量峰值之和 30% 左右的余量作为缓冲。例如写流量峰值为 100 MB/s，读流量峰值为 200 MB/s，则以 \(100 MB/s + 200 MB/s）x（1 + 30%）的流量峰值规格购买。
-   不同的流量峰值规格有各自对应的 Topic 和分区数量限制。如果您需要创建的 Topic 或分区数量超过某一流量峰值规格限定的最大 Topic 或分区数量，则您需升级实例配置，或删除无用的 Topic 或分区。升配实例的具体操作请参见[升级实例配置](../cn.zh-CN/用户指南/实例管理/升级实例配置.md#)。
-   每一个流量峰值规格都有磁盘空间大小限制。

 |针对包年包月计费模式的专业版实例，如果您在创建 Topic 时选择的是 Local 存储，则会使用 3 副本存储。购买时，需以写流量的 3 倍与读流量之和为基础，再加上该和值 30% 的余量为缓冲。例如写流量峰值为 100 MB/s，读流量峰值为 200 MB/s，则以 \(100 MB/s x 3 + 200 MB/s）x（1 + 30%）的流量峰值规格购买。|
|磁盘容量|出于性能和存储空间考虑，每一个流量峰值规格都有磁盘空间大小限制，即您须购买允许范围内的磁盘容量。此外，流量峰值也受磁盘类型的限制。消息队列 for Apache Kafka 支持以下磁盘类型： -   高效云盘：支持最大的流量峰值为 120 MB/s；
-   （**推荐**）SSD：支持的流量峰值规格最大为 300 MB/s，无升级规格限制；超过 300 MB/s 的流量峰值规格需求，请[提交工单](https://selfservice.console.aliyun.com/ticket/createIndex?spm=a2c4g.11186623.2.18.10522eb10LIqlH)。

 |磁盘类型一经下单不可更改，请谨慎选择。针对包年包月计费模式的专业版实例，如果您在创建 Topic 时选择的是 Local 存储，则会使用 3 副本存储。例如您购买了 300 GB 的磁盘容量，由于 3 备份，实际的业务存储容量为 100 GB，其余的 200 GB 为备份存储容量。|
|Topic 规格|超出 Topic 规格基数的 Topic 按照数量另计费。|无|

**说明：** 

-   各个计费项目分别计费后再叠加的费用即是您需支付的费用。
-   您可以设置**消息保留的最长时间**节省磁盘容量，该参数是指在磁盘容量充足的情况下，消息的最长保留时间。在磁盘容量不足（即磁盘空间使用率达到 85%）时，系统将提前删除旧的消息，以确保服务可用性。消息保留的最长时间默认为 72 小时，可选 24 小时 ～ 168 小时。

## 包年包月 {#section_zt1_rad_6pr .section}

在包年包月模式下，根据购买的实例规格类型，计费有所差异。

**实例规格类型**

在包年包月计费模式下，消息队列 for Apache Kafka 的实例按照规格可分为专业版和标准版两类，两个版本间的区别如下表所示。

|对比项|专业版|标准版|
|---|---|---|
|兼容版本|已支持 0.10.x、1.x 和 2.x **说明：** 默认部署版本为 0.10.x，若需升级，请[提交工单](https://selfservice.console.aliyun.com/ticket/category/alikafka/recommend/1569?spm=a2c4g.11186623.2.19.10522eb10LIqlH)。

 |仅支持 0.10.x|
|实例类型|专享实例，独占物理节点|虚拟实例、部分共享|
|专家尊享通道|专家尊享通道服务内容包括以下几点： -   产品专家与研发专家提供技术支持，及时跟进线上问题处理；
-   Kafka 架构设计、稳定性建议、参数调优以及最佳实践；
-   可根据您的需要，提供保驾护航服务（如大促保障护航、新业务上线等）。

 |不支持|
|消息存储时间|根据您的场景定制|最多 7 天|
|容灾|支持多可用区部署|单可用区部署|
|性能调优|支持根据业务场景定制|不支持|
|跨地域（Region）消息路由|即将支持|不支持|
|开通通道|[立即开通](https://common-buy.aliyun.com/?spm=a2c4g.11186623.2.20.10522eb1MS1MHs&commodityCode=alikafka_pre#/)|[立即开通](https://common-buy.aliyun.com/?spm=a2c4g.11186623.2.21.10522eb1MS1MHs&commodityCode=alikafka_pre#/)|

**计费公式**

计费公式与实例类型相关，说明如下：

-   如果购买的是公网实例，请按需选择公网流量、流量峰值以及磁盘容量，计费以月或以年为单位。计费公式如下：总计费 =（公网流量单价 + 流量峰值单价 + 磁盘容量单价 x 购买的磁盘容量/100 + Topic 单价 x 增加的 Topic 数量）x 月数
-   如果购买的是 VPC 实例，请按需选择流量峰值以及磁盘容量，计费以月或以年为单位。计费公式如下：总计费 =（流量峰值单价 + 磁盘容量单价 x 购买的磁盘容量/100 + Topic 单价 x 增加的 Topic 数量）x 月数

**说明：** 标准版和专业版实例的流量峰值的单价不一样。

**计费规则**

计费规则包含公网流量、流量峰值和磁盘容量，说明如下：

-   公网流量计费规则详情，请参见弹性公网 IP 的[包年包月](../../../../../cn.zh-CN/产品定价/包年包月.md#)。
-   流量峰值计费规则如下表所示（标准版和专业版不同）。如需更大规格，请[提交工单](https://selfservice.console.aliyun.com/ticket/category/alikafka/recommend/1569?spm=a2c4g.11186623.2.23.10522eb1KweSTZ)。

**标准版实例**

**说明：** 以下为扣除磁盘费用的流量峰值价格。

|流量峰值（MB/s）|Topic 数量（个）|分区数量（个）|中国内地单价（元/月）|中国（香港）、新加坡（新加坡）、日本（东京）、美国（硅谷）、美国（弗吉尼亚）、澳大利亚（悉尼）单价（元/月）|马来西亚（吉隆坡）、印度 （孟买）、印度尼西亚 （雅加达）单价（元/月）|
|----------|-----------|-------|-----------|------------------------------------------------------|------------------------------------|
|20|50|400|1408.5|2050.5|1878.5|
|30|50|500|2003.5|2907.5|2667.5|
|60|80|600|2793.5|4051.5|3715.5|
|90|100|800|3431|4979|4563|
|120|150|900|4121|5973|5471|

**专业版实例**

针对专业版实例，流量峰值和磁盘容量大小的选择与 Topic 的存储引擎相关。目前支持云存储和 Local 存储两种引擎，详情请参见 [Topic 存储最佳实践](../cn.zh-CN/最佳实践/Topic 存储最佳实践.md#)。

-   流量峰值说明如下。

    **说明：** 以下为扣除磁盘费用的流量峰值价格。

    |流量峰值（MB/s）|Topic 数量（个）|分区数量（个）|中国内地单价（元/月）|中国（香港）、新加坡（新加坡）、日本（东京）、美国（硅谷）、美国（弗吉尼亚）、澳大利亚（悉尼）单价（元/月）|马来西亚（吉隆坡）、印度 （孟买）、印度尼西亚 （雅加达）单价（元/月）|
    |----------|-----------|-------|-----------|------------------------------------------------------|------------------------------------|
    |20|50|1100|3337|4917.5|4511.5|
    |30|50|1200|4235|6142.5|5642.5|
    |60|80|1400|5835|8462.5|7764.5|
    |90|100|1600|7065|10245|9397|
    |120|150|1800|8445|12255|11239|
    |160|180|2000|9525|13820|12672|
    |200|200|2200|14565|21125|19375|
    |250|250|2500|16565|23970|21988|
    |300|300|3000|18185|26370|24192|
    |600|450|4500|20785|30140|27650|
    |800|500|5000|22485|32605|29911|
    |1000|600|6000|24305|35250|32334|
    |1200|700|7000|25785|37390|34300|
    |1500|800|8000|28385|41160|37758|
    |1800|900|9000|30885|44785|41083|
    |2000|1000|10000|32925|47745|43791|

-   磁盘容量的具体计费规则如下表所示（适用于标准版和专业版）。

    |磁盘类型|中国内地单价（元/月/100 GB）|中国（香港）、新加坡（新加坡）、日本（东京）、美国（硅谷）、美国（弗吉尼亚）、澳大利亚（悉尼）单价（元/月/100 GB）|马来西亚（吉隆坡）、印度 （孟买）、印度尼西亚 （雅加达）单价（元/月/100 GB）|说明|
    |----|------------------|-------------------------------------------------------------|-------------------------------------------|--|
    |高效云盘|35|51|47|支持的流量峰值规格最大为 120 MB/s|
    |SSD|100|145|133|支持的流量峰值规格最大为 300 MB/s，无升级规格限制；超过 300 MB/s 的流量峰值规格需求，请[提交工单](https://selfservice.console.aliyun.com/ticket/createIndex?spm=a2c4g.11186623.2.25.4cfd2eb1ibsFz8)。|

-   Topic 规格的具体计费规则如下表所示（适用于标准版和专业版）。

    |计费项目|中国内地单价（元/月）|中国（香港）、新加坡（新加坡）、日本（东京）、美国（硅谷）、美国（弗吉尼亚）、澳大利亚（悉尼）单价（元/月/100 GB）|马来西亚（吉隆坡）、印度 （孟买）、印度尼西亚 （雅加达）单价（元/月/100 GB）|说明|
    |----|-----------|-------------------------------------------------------------|-------------------------------------------|--|
    |Topic|40|60|60|     -   **流量峰值 20 ~ 300 MB/s：** 

支持的最大 Topic 规格为 450 。

    -   **流量峰值 600 ~ 2000 MB/s：** 

支持的最大 Topic 规格为 1.5 x Topic 基数。

 |


**计费示例**

例如，您在华东 1（杭州）地域，购买 1 个消息队列 for Apache Kafka 的专业版 VPC 实例，服务期为 1 个月，您根据您的读写流量峰值之和购买 90 MB/s 规格，Topic 规格为 120 个，即在基数 100 个的基础上增加 20 个 Topic，磁盘容量为 6000 GB，则您的消费账单为: \(7065 + 6000/100 x 100 + 20 x 40\) x 1 = 13865 元。

**欠费处理**

在您购买的服务到期前 168 小时、72 小时以及 24 小时，您会分别收到三次到期通知（可通过站内信查看），以提醒您服务即将到期，请及时续费。

如果您购买的服务已到期，您账户下的消息队列 for Apache Kafka 服务会立即停机，即您将不能再继续使用消息队列 for Apache Kafka 服务。如果停机后 168 小时依然欠费，消息队列 for Apache Kafka 实例将会释放，即您不能再使用消息队列 for Apache Kafka 服务。

**说明：** 实例释放后数据不可恢复。

## 按量后付费 {#section_oik_ks8_s2u .section}

在按量后付费模式下，您按需选择流量峰值以及磁盘容量，计费以小时为单位，**不足一小时按照一小时计算。**每小时进行一次结算，每 24 小时出一次账单，费用将自动从账户余额中扣除，即阿里云将在下一个自然日就您上一个自然日的服务使用进行计量、出具账单并自您的阿里云账户中按账单金额扣划服务费用。

**计费公式**

计费公式与实例类型相关，说明如下：

-   如果购买的是公网实例，请按需选择公网流量、流量峰值以及磁盘容量，计费公式如下：

    总计费 =（公网流量单价 + 流量峰值单价 + 磁盘容量单价 x 购买的磁盘容量/100 + Topic 单价 x 增加的 Topic 数量）x 小时数

-   如果购买的是 VPC 实例，请按需选择流量峰值以及磁盘容量，计费公式如下：

    总计费 =（流量峰值单价 + 磁盘容量单价 x 购买的磁盘容量/100 + Topic 单价 x 增加的 Topic 数量）x 小时数


**计费规则**

计费规则包含流量峰值和磁盘容量，说明如下：

-   流量峰值计费规则如下表所示。

    **说明：** 以下为扣除磁盘费用的流量峰值价格。

    |流量峰值（MB/s）|Topic 数量（个）|中国内地单价（元/小时）|中国（香港）、新加坡（新加坡）、日本（东京）、美国（硅谷）、美国（弗吉尼亚）、澳大利亚（悉尼）单价（元/小时）|
    |----------|-----------|------------|-------------------------------------------------------|
    |20|50|2.42|3.51|
    |30|50|3.50|5.08|
    |60|80|5.04|7.31|
    |90|100|6.43|9.33|
    |120|150|7.82|11.34|

-   磁盘容量的具体计费规则如下表所示。

    **说明：** 磁盘类型一经下单不可更改，请谨慎选择。

    |磁盘类型|中国内地单价（元/小时/100 GB）|中国（香港）、新加坡（新加坡）、日本（东京）、美国（硅谷）、美国（弗吉尼亚）、澳大利亚（悉尼）单价（元/小时/100 GB）|马来西亚（吉隆坡）、印度 （孟买）、印度尼西亚 （雅加达）单价（元/小时/100 GB）|说明|
    |----|-------------------|--------------------------------------------------------------|--------------------------------------------|--|
    |高效云盘|0.06|0.09|0.08|支持的流量峰值规格最大为 120 MB/s|
    |SSD|0.16|0.24|0.22|支持的流量峰值规格最大为 120 MB/s|

-   增加的 Topic 的具体计费规则如下表所示。

    |计费项目|中国内地单价（元/月）|中国（香港）、新加坡（新加坡）、日本（东京）、美国（硅谷）、美国（弗吉尼亚）、澳大利亚（悉尼）单价（元/月/100 GB）|马来西亚（吉隆坡）、印度 （孟买）、印度尼西亚 （雅加达）单价（元/月/100 GB）|说明|
    |----|-----------|-------------------------------------------------------------|-------------------------------------------|--|
    |增加的 Topic|2|3|3|支持的 Topic 规格最大为 450，即在 Topic 规格基数上最多支持增加到 450 个。|


**计费示例**

例如，您在华东 1（杭州）地域购买 1 个消息队列 for Apache Kafka 的 VPC 实例，流量峰值为 90 MB/s，Topic 规格为 120 个，即在基数 100 个的基础上增加 20 个 Topic，并购买 6000 GB 的 SSD 磁盘容量，您每小时的消费账单为：（6.43 + 0.16 x 6000/100 + 20 x 2）x 1 = 56.03 元。

**欠费处理**

当您的账户余额不足以支付账单金额，您账户下的消息队列 for Apache Kafka 服务处于欠费状态超过 96 小时将会停机，即您将不能使用再继续使用消息队列 for Apache Kafka 服务。如果停机后 168 小时依然欠费，消息队列 for Apache Kafka 实例将会释放，即您不能再使用消息队列 for Apache Kafka 服务。

**说明：** 实例释放后数据不可恢复。

