# 计费说明

本文介绍消息队列Kafka版的规格类型、实例类型、计费项目和计费模式，以便您了解计价规则，并更好地按需选型。

## 规格类型

消息队列Kafka版实例按照规格分为专业版和标准版。

|项目|专业版|标准版|
|--|---|---|
|版本|-   支持0.10.x~2.x。
-   2.x向前兼容0.11.x和1.x。
-   默认部署版本为0.10.x，若需升级，请参见[升级实例版本](/cn.zh-CN/用户指南/实例/升级实例版本.md)。

|仅支持0.10.x。|
|实例类型|专享实例。|虚拟实例（部分共享）。|
|消息存储时间|根据您的场景定制。|最多7天。|
|容灾|支持多可用区部署。|单可用区部署。|
|性能调优|支持根据业务场景定制。|不支持。|
|跨地域（Region）消息路由|不支持。|不支持。|
|Topic|可用Topic数为购买Topic数的两倍。|可用Topic数为购买Topic数。|
|存储成本|分布式3副本机制。 -   云存储：如果您的需求为900 GB数据容量，请购买900 GB磁盘容量。
-   Local存储：如果您的需求为900 GB数据容量，请购买2700 GB磁盘容量。

|分布式3副本机制。 如果您的需求为900 GB数据容量，请购买2700 GB磁盘容量。 |

## 实例类型

消息队列Kafka版按照实例网络类型分为VPC实例和公网/VPC实例。

-   VPC实例：只提供默认接入点，只能通过[专有网络VPC](/cn.zh-CN/产品简介/什么是专有网络.md)访问。
-   公网/VPC实例：提供SSL接入点和默认接入点，既可以通过本地公网访问消息队列Kafka版，也可以通过专有网络VPC访问消息队列Kafka版。

## 计费项目

消息队列Kafka版的计费项目的详细说明如下：

|计费项目|说明|备注|
|----|--|--|
|公网流量|公网流量分为双通道，读写一致。购买时按照读流量峰值或写流量峰值的最大值购买流量峰值规格。|该计费项目仅适用于公网/VPC实例。|
|流量峰值|流量峰值的购买说明如下： -   双通道，读写一致。购买时按照读流量峰值或写流量峰值的最大值购买流量峰值规格。为了业务的稳定性，一般购买大于实际读或写流量峰值最大值30%左右的余量作为缓冲。例如写流量峰值为100 MB/s，读流量峰值为200 MB/s，则以200 MB/s×（1+30%）的流量峰值规格购买。
-   不同的流量峰值规格有各自对应的Topic和分区数量限制。如果您需要创建的Topic或分区数量超过某一流量峰值规格限定的最大Topic或分区数量，则您需升级实例配置，或删除无用的Topic或分区。如需升级实例配置，请参见[升级实例配置](/cn.zh-CN/用户指南/实例/升级实例配置.md)。
-   每一个流量峰值规格都有磁盘空间大小限制。

|无。|
|磁盘容量|出于性能和存储空间考虑，每一个流量峰值规格都有磁盘空间大小限制，即您须购买允许范围内的磁盘容量。此外，流量峰值也受磁盘类型的限制。消息队列Kafka版支持以下磁盘类型： -   高效云盘：
    -   标准版：支持的流量峰值规格最大为120 MB/s。
    -   专业版：不支持。
-   （推荐）SSD：
    -   标准版：支持的流量峰值规格最大为120 MB/s。
    -   专业版：支持的流量峰值规格最大为2000 MB/s。

|磁盘类型一经下单不可更改，请谨慎选择。消息队列Kafka版支持以下存储引擎： -   云存储：
    -   专业版：如果您的需求为900 GB数据容量，请购买900 GB磁盘容量。
    -   标准版：如果您的需求为900 GB数据容量，请购买2700 GB磁盘容量。
-   Local存储：

如果您的需求为900 GB数据容量，请购买2700 GB磁盘容量。 |
|Topic规格|-   不同流量峰值对应不同的Topic规格。Topic规格和流量峰值的对应关系 ，请参见[包年包月](#section_zt1_rad_6pr)和[按量付费](#section_oik_ks8_s2u)中的流量峰值计费规则。
-   在默认分区数的基础上，每增购1个Topic，对应增加16个分区。例如，您购买了Topic数量为50、流量峰值为20 MB/s、默认分区数为400的实例，那么当您增购10个Topic后，该实例对应增加160个分区，分区数上升为560。
-   专业版实例的可用Topic数=购买Topic数×2。例如，您购买了Topic数量为50的专业版实例，那么该实例实际可用的Topic数为100。

|无。|

**说明：**

-   各个计费项目分别计费后再叠加的费用即是您需支付的费用。
-   您可以设置**消息保留的最长时间**节省磁盘容量，该参数是指在磁盘容量充足的情况下，消息的最长保留时间。在磁盘容量不足（即磁盘空间使用率达到90%）时，系统将提前删除旧的消息，以确保服务可用性。消息保留的最长时间默认为72小时，可选24小时～168小时。
-   接口调用次数不作为计费项。

## 计费模式

消息队列Kafka版实例支持两种计费模式：

-   [包年包月](#section_zt1_rad_6pr)
-   [按量付费](#section_oik_ks8_s2u)

**说明：**

-   若需切换计费模式，您可登录[消息队列Kafka版控制台](http://kafka.console.aliyun.com/?spm=a2c4g.11186623.2.16.10522eb1SUcSI6)，在**实例详情**页面的**运行状态**区域，单击**转包年包月**完成切换。

-   目前，仅支持从按量后付费模式切换到包年包月预付费模式，且切换前后的配置不能变更。


## 包年包月

计费公式

计费公式与实例类型相关。

-   如果购买的是公网/VPC实例，请按需选择公网流量、流量峰值、磁盘容量、增加的Topic数量。

    总计费=（公网流量单价+流量峰值单价+磁盘容量单价×购买的磁盘容量/100+Topic单价 × 增加的Topic数量）×月数

-   如果购买的是VPC实例，请按需选择流量峰值、磁盘容量、增加的Topic数量。

    总计费=（流量峰值单价+磁盘容量单价×购买的磁盘容量/100+ Topic单价×增加的Topic数量）×月数


计费规则

计费规则包括公网流量、流量峰值、磁盘容量、增加的Topic：

-   公网流量计费规则

    详情请参见弹性公网IP的[包年包月](/cn.zh-CN/产品定价/包年包月.md)。

-   流量峰值计费规则

    流量峰值的计费规则与规格类型相关。

    |流量峰值（MB/s）|Topic数量（个）|分区数量（个）|中国内地（元/月）|中国香港、新加坡（新加坡）（元/月）|印度 （孟买）、印度尼西亚 （雅加达）（元/月）|
    |----------|----------|-------|---------|------------------|------------------------|
    |20|50|400|1408.5|2050.5|1878.5|
    |30|50|500|2003.5|2907.5|2667.5|
    |60|80|600|2793.5|4051.5|3715.5|
    |90|100|800|3431|4979|4563|
    |120|150|900|4121|5973|5471|

    |流量峰值（MB/s）|Topic数量（个）|分区数量（个）|中国内地（元/月）|中国香港、新加坡（新加坡）（元/月）|印度 （孟买）、印度尼西亚 （雅加达）（元/月）|
    |----------|----------|-------|---------|------------------|------------------------|
    |20|50|1100|3387|4917.5|4511.5|
    |30|50|1200|4235|6142.5|5642.5|
    |60|80|1400|5835|8462.5|7764.5|
    |90|100|1600|7065|10245|9397|
    |120|150|1800|8445|12255|11239|
    |160|180|2000|9525|13820|12672|
    |200|200|2200|14565|21125|19375|
    |250|250|2500|16525|23970|21988|
    |300|300|3000|18185|26370|24192|
    |600|450|4500|20785|30140|27650|
    |800|500|5000|22485|32605|29911|
    |1000|600|6000|24305|35250|32334|
    |1200|700|7000|25785|37390|34300|
    |1500|800|8000|28385|41160|37758|
    |1800|900|9000|30885|44785|41083|
    |2000|1000|10000|32925|47745|43791|

    **说明：** 如需更大规格，请[提交工单](https://selfservice.console.aliyun.com/ticket/category/alikafka/recommend/1569?spm=a2c4g.11186623.2.23.10522eb1KweSTZ)。

-   磁盘容量计费规则

    |磁盘类型|磁盘大小（GB）|中国内地单价（元/月）|中国香港、新加坡（新加坡）单价（元/月）|印度 （孟买）、印度尼西亚 （雅加达）单价（元/月）|说明|
    |----|--------|-----------|--------------------|--------------------------|--|
    |高效云盘|100|35|51|47|支持的流量峰值规格最大为120 MB/s。|
    |SSD|100|100|145|133|    -   支持的流量峰值规格最大为300 MB/s，无升级规格限制。
    -   超过300 MB/s的流量峰值规格需求，请[提交工单](https://selfservice.console.aliyun.com/ticket/createIndex?spm=a2c4g.11186623.2.25.4cfd2eb1ibsFz8)。 |

-   增加Topic计费规则

    |计费项目|Topic数量（个）|中国内地单价（元/月）|中国香港、新加坡（新加坡）单价（元/月）|印度 （孟买）、印度尼西亚 （雅加达）单价（元/月）|说明|
    |----|----------|-----------|--------------------|--------------------------|--|
    |Topic|1|40|58|54|    -   流量峰值20 MB/s~300 MB/s：

支持的最大Topic规格为450。

    -   流量峰值600 MB/s~2000 MB/s：

支持的最大Topic规格为1.5×Topic基数。

    -   您每增加1个Topic，对应增加2个Consumer Group的配额。 |


欠费处理

如果您购买的服务已到期，您账户下的消息队列Kafka版服务会立即停机，即您将不能再继续使用消息队列Kafka版服务。如果停机后168小时依然欠费，消息队列Kafka版实例将会释放，实例释放后数据不可恢复，即您不能再使用消息队列Kafka版服务。

## 按量付费

在按量付费模式下，您按需选择流量峰值以及磁盘容量等配置项，计费以小时为单位，不足一小时按照一小时计算。每小时进行一次结算，每24小时出一次账单，费用将自动从账户余额中扣除，即阿里云将在下一个自然日就您上一个自然日的服务使用进行计量、出具账单并自您的阿里云账户中按账单金额扣划服务费用。

**说明：**

您在购买消息队列Kafka版按量付费实例后，系统会为您分配相应的实例资源。因此，按量付费模式是以实例单价 × 服务时间计费的，与您购买后是否使用该实例无关。

计费公式

计费公式与实例类型相关。

-   如果购买的是公网/VPC实例，请按需选择公网流量、流量峰值、磁盘容量、增加的Topic数量，计费公式如下。

    总计费=（公网流量单价+流量峰值单价+磁盘容量单价x购买的磁盘容量/100+Topic单价x增加的Topic数量）x小时数

-   如果购买的是VPC实例，请按需选择流量峰值、磁盘容量、增加的Topic数量，计费公式如下。

    总计费=（流量峰值单价+磁盘容量单价x购买的磁盘容量/100+Topic单价x增加的Topic数量）x小时数


计费规则

计费规则包含公网流量、流量峰值、磁盘容量、增加Topic：

-   公网流量计费规则

    详情请参见弹性公网IP的[按量计费](/cn.zh-CN/产品定价/按量计费.md)。

-   流量峰值计费规则

    流量峰值的计费规则与规格类型相关。

    |流量峰值（MB/s）|Topic数量（个）|中国内地（元/小时）|中国香港、新加坡（新加坡）（元/小时）|
    |----------|----------|----------|-------------------|
    |20|50|2.42|3.51|
    |30|50|3.50|5.08|
    |60|80|5.04|7.31|
    |90|100|6.43|9.33|
    |120|150|7.82|11.34|

    |流量峰值（MB/s）|Topic数量（个）|中国内地单价（元/小时）|中国香港、新加坡（新加坡）（元/小时）|
    |----------|----------|------------|-------------------|
    |20|50|5.21|7.52|
    |30|50|6.50|9.36|
    |60|80|8.93|12.85|
    |90|100|10.79|15.47|
    |120|150|12.88|18.48|
    |160|180|14.50|20.75|
    |200|200|22.23|31.87|
    |250|250|25.20|36.12|
    |300|300|27.69|39.63|
    |600|450|31.34|44.41|
    |800|500|33.72|47.51|
    |1000|600|36.25|50.80|
    |1200|700|38.32|53.48|
    |1500|800|41.97|58.26|
    |1800|900|45.46|62.80|
    |2000|1000|48.30|66.49|

-   磁盘容量计费规则

    |磁盘类型|磁盘大小（GB）|中国内地单价（元/小时）|中国香港、新加坡（新加坡）单价（元/小时）|说明|
    |----|--------|------------|---------------------|--|
    |高效云盘|100|0.06|0.09|    -   支持的流量峰值规格最大为120 MB/s。
    -   磁盘类型一经下单不可更改，请谨慎选择。 |
    |SSD|100|0.16|0.24|    -   支持的流量峰值规格最大为120 MB/s。
    -   磁盘类型一经下单不可更改，请谨慎选择。 |

-   增加Topic计费规则

    |计费项目|Topic数量（个）|中国内地（元/小时）|中国香港、新加坡（新加坡）（元/小时）|说明|
    |----|----------|----------|-------------------|--|
    |Topic|1|0.083|0.121|    -   支持的Topic规格最大为450，即在Topic规格基数上最多支持增加到450个。
    -   您每增加1个Topic，对应增加2个Consumer Group的配额。 |


欠费处理

当您的账户余额不足以支付账单金额，您账户下的消息队列Kafka版服务处于欠费状态超过96小时将会停机，即您将不能使用再继续使用消息队列Kafka版服务。如果停机后168小时依然欠费，消息队列Kafka版实例将会释放，实例释放后数据不可恢复，即您不能再使用消息队列Kafka版服务。

