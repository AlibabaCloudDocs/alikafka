# 计费说明 {#concept_1375190 .concept}

本文介绍消息队列 Kafka 的实例类型和计费模式，以便您了解计价，更好地按需选型。

## 计费模式 {#section_ch3_r9z_71u .section}

消息队列 Kafka 实例有以下两种计费模式：

-   [包年包月](#section_zt1_rad_6pr)（预付费）

    在包年包月计费模式下，您需预付费，再使用。涉及的计费项目有：公网流量（该计费项目只适用于公网实例）、流量峰值以及磁盘容量。

-   [按量后付费](#section_oik_ks8_s2u)（后付费）

    在按量后付费模式下，您使用后，再付费。涉及的计费项目有：流量峰值和磁盘容量。若需切换计费模式，您可登录[消息队列 Kafka 控制台](http://kafka.console.aliyun.com/?spm=a2c4g.11186623.2.16.10522eb1SUcSI6)，在实例详情页面的**运行状态**区域，单击**转包年包月**完成切换。

    目前，仅支持从按量后付费模式切换到包年包月预付费模式，且切换前后的配置不能变更。


**说明：** Topic 个数与接口调用次数不作为计费项。

## 计费项目 {#section_d1m_5qq_3kn .section}

计费项目的详细说明如下表所示。

|计费项目|说明|备注|
|----|--|--|
|公网流量|公网流量分为双通道，读写一致。购买时请按最大的为准。|该计费项目仅适用于公网实例，且只支持包年包月计费模式。|
|流量峰值|流量峰值的购买说明如下： -   请按照读流量峰值和写流量峰值之和购买流量峰值规格。为了业务的稳定性，一般购买大于实际读写流量峰值之和 30% 左右的余量作为缓冲。例如写流量峰值为 100 MB/s，读流量峰值为 200 MB/s，则以 \(100 MB/s + 200 MB/s）x（1 + 30%）的流量峰值规格购买。
-   不同的流量峰值规格有各自对应的 Topic 和分区数量限制。如果您需要创建的 Topic 或分区数量超过某一流量峰值规格限定的最大 Topic 或分区数量，则您需升级实例配置，或删除无用的 Topic 或分区。升配实例的具体操作请参见[升级实例配置](../../../../cn.zh-CN/用户指南/实例管理/升级实例配置.md#)。
-   每一个流量峰值规格都有磁盘空间大小限制。

 |针对包年包月计费模式的专业版实例，如果您在创建 Topic 时选择的是 Local 存储，则会使用 3 副本存储。购买时，需以写流量的 3 倍与读流量之和为基础，再加上该和值 30% 的余量为缓冲。例如写流量峰值为 100 MB/s，读流量峰值为 200 MB/s，则以 \(100 MB/s x 3 + 200 MB/s）x（1 + 30%）的流量峰值规格购买。|
|磁盘容量|出于性能和存储空间考虑，每一个流量峰值规格都有磁盘空间大小限制，即您须购买允许范围内的磁盘容量。此外，流量峰值也受磁盘类型的限制。消息队列 Kafka 支持以下磁盘类型： -   高效云盘：支持最大的流量峰值为 120 MB/s；
-   （**推荐**）SSD：支持的流量峰值规格最大为 300 MB/s，无升级规格限制；超过 300 MB/s 的流量峰值规格需求，请[提交工单](https://selfservice.console.aliyun.com/ticket/createIndex?spm=a2c4g.11186623.2.18.10522eb10LIqlH)。

 |磁盘类型一经下单不可更改，请谨慎选择。针对包年包月计费模式的专业版实例，如果您在创建 Topic 时选择的是 Local 存储，则会使用 3 副本存储。例如您购买了 300 GB 的磁盘容量，由于 3 备份，实际的业务存储容量为 100 GB，其余的 200 GB 为备份存储容量。|

**说明：** 

-   各个计费项目分别计费后再叠加的费用即是您需支付的费用。
-   您可以设置**消息保留的最长时间**节省磁盘容量，该参数是指在磁盘容量充足的情况下，消息的最长保留时间。在磁盘容量不足（即磁盘空间使用率达到 85%）时，系统将提前删除旧的消息，以确保服务可用性。消息保留的最长时间默认为 72 小时，可选 24 小时 ～ 168 小时。

## 包年包月 {#section_zt1_rad_6pr .section}

在包年包月模式下，根据购买的实例规格类型，计费有所差异。

**实例规格类型**

在包年包月计费模式下，消息队列 Kafka 的实例按照规格可分为专业版和标准版两类，两个版本间的区别如下表所示。

|对比项|专业版|标准版|
|---|---|---|
|兼容版本|已支持 0.10.x、1.x 和 2.x **说明：** 默认部署版本为 0.10.x，若需升级，请[提交工单](https://selfservice.console.aliyun.com/ticket/category/alikafka/recommend/1569?spm=a2c4g.11186623.2.19.10522eb10LIqlH)。

 |仅支持 0.10.x|
|实例类型|专享实例，独占物理节点|虚拟实例、部分共享|
|专家尊享通道|专家尊享通道服务内容包括以下几点： -   产品专家与研发专家提供技术支持，及时跟进线上问题处理；
-   Kafka 架构设计、稳定性建议、参数调优以及最佳实践；
-   可根据您的需要，提供保驾护航服务（如大促保障护航、新业务上线等）。

 |不支持|
|消息存储时间|根据您的场景定制|最多 7 天|
|容灾|支持多可用区部署|单可用区部署|
|性能调优|支持根据业务场景定制|不支持|
|跨地域（Region）消息路由|即将支持|不支持|
|开通通道|[立即开通](https://common-buy.aliyun.com/?spm=a2c4g.11186623.2.20.10522eb1MS1MHs&commodityCode=alikafka_pre#/)|[立即开通](https://common-buy.aliyun.com/?spm=a2c4g.11186623.2.21.10522eb1MS1MHs&commodityCode=alikafka_pre#/)|

**计费公式**

计费公式与实例类型相关，说明如下：

-   如果购买的是公网实例，请按需选择公网流量、流量峰值以及磁盘容量，计费以月或以年为单位。计费公式如下：总计费 =（公网流量单价 + 流量峰值单价 + 磁盘容量单价 x 购买的磁盘容量/100）x 月数
-   如果购买的是 VPC 实例，请按需选择流量峰值以及磁盘容量，计费以月或以年为单位。计费公式如下：总计费 =（流量峰值单价 + 磁盘容量单价 x 购买的磁盘容量/100）x 月数

**说明：** 标准版和专业版实例的流量峰值的单价不一样。

**计费规则**

计费规则包含公网流量、流量峰值和磁盘容量，说明如下：

-   公网流量计费规则详情，请参见弹性公网 IP 的[预付费](../../../../cn.zh-CN/产品定价/预付费.md#)。
-   流量峰值计费规则如下表所示（标准版和专业版不同）。如需更大规格，请[提交工单](https://selfservice.console.aliyun.com/ticket/category/alikafka/recommend/1569?spm=a2c4g.11186623.2.23.10522eb1KweSTZ)。

**标准版实例**

|流量峰值（MB/s）|Topic 数量范围（个）|磁盘空间范围（GB）|最大分区数量|中国内地单价（元/月）|金融云（华东 1）、金融云（华东 2）、金融云（华南 1）单价（元/月）|中国（香港）、新加坡（新加坡）、日本（东京）、美国（硅谷）、美国（弗吉尼亚）、澳大利亚（悉尼）单价（元/月）|马来西亚（吉隆坡）、印度 （孟买）、印度尼西亚 （雅加达）单价（元/月）|
|----------|-------------|----------|------|-----------|------------------------------------|------------------------------------------------------|------------------------------------|
|20|50 ~ 450|450 ~ 6100|400|1566|2976|2280|2090|
|30|50 ~ 450|750 ~ 6100|500|2266|4306|3290|3020|
|60|50 ~ 450|1350 ~ 6100|600|3266|6206|4740|4350|
|90|50 ~ 450|2100 ~ 6100|800|4166|7916|6050|5550|
|120|50 ~ 450|2700 ~ 6100|900|5066|9626|7350|6740|

**专业版实例**

针对专业版实例，流量峰值和磁盘容量大小的选择与 Topic 的存储引擎相关。目前支持云存储和 Local 存储两种引擎，详情请参见 [Topic 存储最佳实践](../../../../cn.zh-CN/最佳实践/Topic 存储最佳实践.md#)。

-   流量峰值说明如下。

    |流量峰值（MB/s）|Topic 数量范围（个）|磁盘空间范围（GB）|最大分区数量|中国内地单价（元/月）|金融云（华东 1）、金融云（华东 2）、金融云（华南 1）单价（元/月）|中国（香港）、新加坡（新加坡）、日本（东京）、美国（硅谷）、美国（弗吉尼亚）、澳大利亚（悉尼）单价（元/月）|马来西亚（吉隆坡）、印度 （孟买）、印度尼西亚 （雅加达）单价（元/月）|
    |----------|-------------|----------|------|-----------|------------------------------------|------------------------------------------------------|------------------------------------|
    |20|50 ~ 450|450 ~ 6100|1100|3837|7291|5570|5510|
    |30|50 ~ 450|750 ~ 6100|1200|4985|9472|7230|6640|
    |60|50 ~ 450|1350 ~ 6100|1400|7185|13652|10420|9560|
    |90|50 ~ 450|2100 ~ 6100|1600|9165|17414|13290|12190|
    |120|50 ~ 450|2700 ~ 6100|1800|11145|21176|16170|14830|
    |160|50 ~ 450|3600 ~ 6100|2000|13125|24938|19040|17460|
    |200|50 ~ 450|4500 ~ 8100|2200|19065|36224|27650|25360|
    |250|50 ~ 450|5400 ~ 8100|2500|21925|41658|31800|29170|
    |300|50 ~ 450|6600 ~ 8100|3000|24785|47092|35940|32970|
    |600|50 ~675|13000 ~ 48000|4500|33785|64192|48990|44940|
    |800|50 ~750|17300 ~ 60000|5000|39785|75592|57690|52920|
    |1000|50 ~900|22200 ~ 78000|6000|46505|88360|67440|61860|
    |1200|50 ~1050|26000 ~ 90000|7000|51785|98392|75090|68880|
    |1500|50 ~1200|32400 ~ 114000|8000|60785|115492|88140|80850|
    |1800|50 ~1350|38900 ~ 138000|9000|69785|132592|101190|92820|
    |2000|50 ~1500|44300 ~ 150000|10000|77225|146728|111980|102710|

-   磁盘容量的具体计费规则如下表所示（适用于标准版和专业版）。

    |磁盘类型|国内单价（元/月/100 GB）|金融云（华东 1）、金融云（华东 2）、金融云（华南 1）单价（元/月/100 GB）|中国（香港）、新加坡（新加坡）、日本（东京）、美国（硅谷）、美国（弗吉尼亚）、澳大利亚（悉尼）单价（元/月/100 GB）|马来西亚（吉隆坡）、印度 （孟买）、印度尼西亚 （雅加达）单价（元/月/100 GB）|说明|
    |----|----------------|-------------------------------------------|-------------------------------------------------------------|-------------------------------------------|--|
    |高效云盘|35|67|51|47|支持的流量峰值规格最大为 120 MB/s|
    |SSD|100|190|145|133|支持的流量峰值规格最大为 300 MB/s，无升级规格限制；超过 300 MB/s 的流量峰值规格需求，请[提交工单](https://selfservice.console.aliyun.com/ticket/createIndex?spm=a2c4g.11186623.2.25.4cfd2eb1ibsFz8)。|


**计费示例**

例如，购买 1 个消息队列 Kafka 的标准版 VPC 实例，服务期为 2 个月，您根据您的读写流量峰值之和购买 90 MB/s 规格（您最多能创建 100 个 Topic），并购买 6000 GB 的 SSD 磁盘容量，则您的消费账单为: （4166 + 6000/100 x 100\) x 2 = 20,332 元。

**欠费处理**

在您购买的服务到期前 168 小时、72 小时以及 24 小时，您会分别收到三次到期通知（可通过站内信查看），以提醒您服务即将到期，请及时续费。

如果您购买的服务已到期，您账户下的消息队列 Kafka 服务会立即停机，即您将不能再继续使用消息队列 Kafka 服务。如果停机后 168 小时依然欠费，消息队列 Kafka 实例将会释放，即您不能再使用消息队列 Kafka 服务。

**说明：** 实例释放后数据不可恢复。

## 按量后付费 {#section_oik_ks8_s2u .section}

在按量后付费模式下，您按需选择流量峰值以及磁盘容量，计费以小时为单位，**不足一小时按照一小时计算。**每小时进行一次结算，每 24 小时出一次账单，费用将自动从账户余额中扣除，即阿里云将在下一个自然日就您上一个自然日的服务使用进行计量、出具账单并自您的阿里云账户中按账单金额扣划服务费用。

**计费公式**

计费公式与实例类型相关，说明如下：

-   如果购买的是公网实例，请按需选择公网流量、流量峰值以及磁盘容量，计费公式如下：

    总计费 =（公网流量单价 + 流量峰值单价 + 磁盘容量单价 x 购买的磁盘容量/100）x 小时数

-   如果购买的是 VPC 实例，请按需选择流量峰值以及磁盘容量，计费公式如下：

    总计费 =（流量峰值单价 + 磁盘容量单价 x 购买的磁盘容量/100）x 小时数


**计费规则**

计费规则包含流量峰值和磁盘容量，说明如下：

-   流量峰值计费规则如下表所示。

    |流量峰值（MB/s）|Topic 数量范围（个）|磁盘空间范围（GB）|中国内地单价（元/小时）|金融云（华东 1）、金融云（华东 2）、金融云（华南 1）单价（元/小时）|中国（香港）、新加坡（新加坡）、日本（东京）、美国（硅谷）、美国（弗吉尼亚）、澳大利亚（悉尼）单价（元/小时）|
    |----------|-------------|----------|------------|-------------------------------------|-------------------------------------------------------|
    |20|50 ~ 450|500 ~ 6100|2.42|4.6|3.51|
    |30|50 ~ 450|800 ~ 6100|3.50|6.65|5.08|
    |60|50 ~ 450|1400 ~ 6100|5.04|9.58|7.31|
    |90|50 ~ 450|2100 ~ 6100|6.43|12.22|9.33|
    |120|50 ~ 450|2700 ~ 6100|7.82|14.86|11.34|

-   磁盘容量的具体计费规则如下表所示。

    **说明：** 磁盘类型一经下单不可更改，请谨慎选择。

    |磁盘类型|中国内地单价（元/小时/100 GB）|金融云（华东 1）、金融云（华东 2）、金融云（华南 1）单价（元/月/100 GB）|中国（香港）、新加坡（新加坡）、日本（东京）、美国（硅谷）、美国（弗吉尼亚）、澳大利亚（悉尼）单价（元/小时/100 GB）|马来西亚（吉隆坡）、印度 （孟买）、印度尼西亚 （雅加达）单价（元/小时/100 GB）|说明|
    |----|-------------------|-------------------------------------------|--------------------------------------------------------------|--------------------------------------------|--|
    |高效云盘|0.06|0.12|0.09|0.08|支持的流量峰值规格最大为 120 MB/s|
    |SSD|0.16|0.31|0.24|0.22|支持的流量峰值规格最大为 120 MB/s|


**计费示例**

例如，购买 1 个消息队列 Kafka 的 VPC 实例，您根据您的读写流量峰值之和购买 90 MB/s 规格（您最多能创建 100 个 Topic），并购买 6000 GB 的 SSD 磁盘容量，您每小时的消费账单为：（6.43 + 0.15 x 6000/100）x 1 = 15.43 元。

**欠费处理**

当您的账户余额不足以支付账单金额，您账户下的消息队列 Kafka 服务处于欠费状态超过 96 小时将会停机，即您将不能使用再继续使用消息队列 Kafka 服务。如果停机后 168 小时依然欠费，消息队列 Kafka 实例将会释放，即您不能再使用消息队列 Kafka 服务。

**说明：** 实例释放后数据不可恢复。

