# 升级Broker可能产生哪些影响？

升级Broker可能产生消息乱序、客户端连接中断、消息量不均衡等影响。

升级Broker包含以下影响：

-   升级过程中，会逐个重启消息队列Kafka版集群中所有的Broker。在重启Broker的过程中服务不会中断，但是从每个Broker重启完成之后的5分钟内消费的分区消息可能会发生乱序（设置为顺序消息的，则不会乱序，而是短暂的不可用）。
-   重启过程中已有的客户端连接可能会中断。需要您的客户端有自动重连功能，服务端的其他Broker会自动接替服务。
-   此外，升级和重启Broker期间，各个分区处理的消息量也会出现一定的不均衡，需要您评估一下升级变更对您业务可能产生的影响。

升级所有Broker大概需要5分钟~15分钟。如果有多个实例，可以考虑先升级测试集群，验证通过后再升级生产集群。

**说明：** 如果您使用的是Sarama Go客户端收发消息，升级Broker可能会导致消息重复消费的情况。更多信息，请参见[为什么不推荐使用Sarama Go客户端收发消息？](/cn.zh-CN/SDK参考/客户端消费问题/为什么不推荐使用Sarama Go客户端收发消息？.md)。

